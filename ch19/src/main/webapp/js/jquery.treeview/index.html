<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

	<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
	<title>jQuery treeView</title>
	
	<link rel="stylesheet" href="jquery.treeview.css" />
	<link rel="stylesheet" href="screen.css" />
	<script src="jquery.js" type="text/javascript"></script>
	<script src="jquery.cookie.js" type="text/javascript"></script>
	<script src="jquery.treeview.js" type="text/javascript"></script>
	<script type="text/javascript">
	$(document).ready(function(){
		//全选/取消
		$("#selectall").click(function(){
			if($("li input[type='checkbox']").attr("checked")==true){
				$("li input[type='checkbox']").attr("checked",false);
			}else{
				$("li input[type='checkbox']").attr("checked",true);
			}
		});
			
		//选子,父也选上; 取消父,子也取消
		$("li").click(function() {
			if($(this).find("input:eq(0)").attr("checked")==true){
				$(this).parents("li").find("input:eq(0)").attr("checked",true);
			} 
			if($(this).find("input:eq(0)").attr("checked")==false){
				$(this).find("input:gt(0)").attr("checked",false);
			}
		});
		
		$("#black").treeview({
			control: "#treecontrol",
			persist: "cookie"
		});

	});
	</script>
	<style type="text/css">
	  	#black.treeview li { background: url(images/black/tv-item.gif) 0 0 no-repeat; }
	  	#black.treeview .collapsable { background-image: url(images/black/tv-collapsable.gif); }
	  	#black.treeview .expandable { background-image: url(images/black/tv-expandable.gif); }
	  	#black.treeview .last { background-image: url(images/black/tv-item-last.gif); }
	  	#black.treeview .lastCollapsable { background-image: url(images/black/tv-collapsable-last.gif); }
	  	#black.treeview .lastExpandable { background-image: url(images/black/tv-expandable-last.gif); }	
	</style>
	</head>
	<body>

	<div id="treecontrol">
		<a href="#"></a>
		<a href="#"></a>
		<a href="#"></a>
		<input type="button" name="selectall" id="selectall" value="全选/取消全选"/>
	</div>
	<div id="main">
	<ul id="black" name="black">
		<li><input type="checkbox"  name="checkedMenu" />Item 1</li>
		<li><input type="checkbox"  name="checkedMenu" />
			<span>Item 2</span>
			<ul>
				<li><input type="checkbox"  name="checkedMenu" />
					<span>Item 2.1</span>
					<ul>
						<li><input type="checkbox"  name="checkedMenu" />Item 2.1.1</li>
						<li><input type="checkbox"  name="checkedMenu" />Item 2.1.2</li>
					</ul>
				</li>
				<li><input type="checkbox"  name="checkedMenu" />Item 2.2</li>
				<li class="closed"><input type="checkbox"  name="checkedMenu" />
					<span>Item 2.3 (closed at start)</span>
					<ul>
						<li><input type="checkbox"  name="checkedMenu" />Item 2.3.1</li>
						<li><input type="checkbox"  name="checkedMenu" />Item 2.3.2</li>
					</ul>
				</li>
			</ul>
		</li>
	</ul>
	</div>

</body>
</html>